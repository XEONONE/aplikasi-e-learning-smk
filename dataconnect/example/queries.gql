# Queries for e-learning app

query GetAllMateri @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  materis {
    id
    title
    description
    content
    createdBy {
      id
      nama
    }
    createdAt
    updatedAt
  }
}

query GetMateriById($id: UUID!) @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  materi(key: { id: $id }) {
    id
    title
    description
    content
    createdBy {
      id
      nama
    }
    createdAt
    updatedAt
  }
}

query GetAllTugas @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  tugass {
    id
    title
    description
    dueDate
    createdBy {
      id
      nama
    }
    createdAt
    updatedAt
  }
}

query GetTugasById($id: UUID!) @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  tugas(key: { id: $id }) {
    id
    title
    description
    dueDate
    createdBy {
      id
      nama
    }
    createdAt
    updatedAt
  }
}

query GetAllPengumuman @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  pengumumans {
    id
    title
    content
    createdBy {
      id
      nama
    }
    createdAt
  }
}

query GetPengumumanById($id: UUID!) @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  pengumuman(key: { id: $id }) {
    id
    title
    content
    createdBy {
      id
      nama
    }
    createdAt
  }
}

query GetSubmissionsByTugas($tugasId: UUID!) @auth(level: USER) {
  submissions(where: { tugasId: { eq: $tugasId } }) {
    id
    content
    submittedAt
    nilai
    submittedBy {
      id
      nama
    }
  }
}

query GetCommentsByMateri($materiId: UUID!) @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  comments(where: { onMateriId: { eq: $materiId } }) {
    id
    content
    createdBy {
      id
      nama
    }
    createdAt
  }
}

query GetCommentsByTugas($tugasId: UUID!) @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  comments(where: { onTugasId: { eq: $tugasId } }) {
    id
    content
    createdBy {
      id
      nama
    }
    createdAt
  }
}

query GetCommentsByPengumuman($pengumumanId: UUID!) @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  comments(where: { onPengumumanId: { eq: $pengumumanId } }) {
    id
    content
    createdBy {
      id
      nama
    }
    createdAt
  }
}
